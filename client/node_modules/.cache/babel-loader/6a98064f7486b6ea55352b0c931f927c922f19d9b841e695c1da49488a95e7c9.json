{"ast":null,"code":"var _jsxFileName = \"/Users/dhruva_kumar/Work Space/final project/client/src/pages/Record.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://192.168.98.141:5001/api/recordings';\n\n// Quality presets for adaptive recording\nconst QUALITY_PRESETS = {\n  high: {\n    video: {\n      width: 1280,\n      height: 720,\n      frameRate: 30,\n      bitrate: 2500000\n    },\n    audio: {\n      sampleRate: 48000,\n      channelCount: 2,\n      bitrate: 128000\n    }\n  },\n  medium: {\n    video: {\n      width: 854,\n      height: 480,\n      frameRate: 25,\n      bitrate: 1000000\n    },\n    audio: {\n      sampleRate: 44100,\n      channelCount: 2,\n      bitrate: 96000\n    }\n  },\n  low: {\n    video: {\n      width: 640,\n      height: 360,\n      frameRate: 20,\n      bitrate: 500000\n    },\n    audio: {\n      sampleRate: 22050,\n      channelCount: 1,\n      bitrate: 64000\n    }\n  },\n  audioOnly: {\n    video: false,\n    audio: {\n      sampleRate: 22050,\n      channelCount: 1,\n      bitrate: 32000\n    }\n  }\n};\nconst Record = () => {\n  _s();\n  var _cameras$currentCamer;\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [chunks, setChunks] = useState([]);\n  const [stream, setStream] = useState(null);\n  const [cameras, setCameras] = useState([]);\n  const [currentCameraIndex, setCurrentCameraIndex] = useState(0);\n  const [currentQuality, setCurrentQuality] = useState('medium');\n  const [isAudioOnly, setIsAudioOnly] = useState(false);\n  const [networkQuality, setNetworkQuality] = useState('unknown');\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [status, setStatus] = useState('Ready to record');\n  const videoRef = useRef();\n  const recordingTimer = useRef(null);\n  const networkCheckInterval = useRef(null);\n  const chunksRef = useRef([]); // Use ref to store chunks\n\n  // Get available cameras\n  const getCameras = async () => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const videoDevices = devices.filter(device => device.kind === 'videoinput');\n      setCameras(videoDevices);\n      return videoDevices;\n    } catch (err) {\n      console.error('Error getting cameras:', err);\n      return [];\n    }\n  };\n\n  // Assess network quality for recording\n  const assessNetworkQuality = async () => {\n    try {\n      // Simple network quality assessment for recording\n      const startTime = performance.now();\n      const response = await fetch(API_URL, {\n        method: 'HEAD',\n        cache: 'no-cache'\n      });\n      const endTime = performance.now();\n      const latency = endTime - startTime;\n      let newQuality = currentQuality;\n      let newAudioOnly = isAudioOnly;\n      if (latency > 1000 || !response.ok) {\n        // Poor network - switch to audio only\n        newQuality = 'audioOnly';\n        newAudioOnly = true;\n        setNetworkQuality('poor');\n      } else if (latency > 500) {\n        // Medium network - use low quality\n        newQuality = 'low';\n        newAudioOnly = false;\n        setNetworkQuality('medium');\n      } else if (latency > 200) {\n        // Good network - use medium quality\n        newQuality = 'medium';\n        newAudioOnly = false;\n        setNetworkQuality('good');\n      } else {\n        // Excellent network - use high quality\n        newQuality = 'high';\n        newAudioOnly = false;\n        setNetworkQuality('excellent');\n      }\n\n      // Apply quality changes if needed\n      if (newQuality !== currentQuality || newAudioOnly !== isAudioOnly) {\n        await adjustRecordingQuality(newQuality, newAudioOnly);\n      }\n      setStatus(`Network: ${networkQuality} (${latency.toFixed(0)}ms latency)`);\n    } catch (error) {\n      console.error('Error assessing network quality:', error);\n      // If network check fails, assume poor network and switch to audio only\n      if (currentQuality !== 'audioOnly') {\n        await adjustRecordingQuality('audioOnly', true);\n      }\n    }\n  };\n\n  // Adjust recording quality based on network conditions\n  const adjustRecordingQuality = async (quality, audioOnly = false) => {\n    if (isRecording) {\n      setStatus('Cannot adjust quality while recording');\n      return;\n    }\n    try {\n      setStatus(`Adjusting quality to: ${quality}${audioOnly ? ' (audio only)' : ''}`);\n\n      // Stop current stream if exists\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n\n      // Get new stream with adjusted quality\n      const constraints = audioOnly ? {\n        audio: QUALITY_PRESETS.audioOnly.audio\n      } : {\n        video: {\n          deviceId: cameras[currentCameraIndex] ? {\n            exact: cameras[currentCameraIndex].deviceId\n          } : undefined,\n          ...QUALITY_PRESETS[quality].video\n        },\n        audio: QUALITY_PRESETS[quality].audio\n      };\n      const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      setStream(newStream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = newStream;\n      }\n      setCurrentQuality(quality);\n      setIsAudioOnly(audioOnly);\n      setStatus(`Quality adjusted to ${quality}`);\n    } catch (error) {\n      console.error('Error adjusting recording quality:', error);\n      setStatus(`Error adjusting quality: ${error.message}`);\n    }\n  };\n\n  // Manual quality adjustment\n  const setQuality = async quality => {\n    await adjustRecordingQuality(quality, quality === 'audioOnly');\n  };\n\n  // Switch camera\n  const switchCamera = async () => {\n    if (cameras.length < 2) {\n      setStatus('Only one camera available');\n      return;\n    }\n    if (isRecording) {\n      setStatus('Cannot switch camera while recording');\n      return;\n    }\n    const newIndex = (currentCameraIndex + 1) % cameras.length;\n    setCurrentCameraIndex(newIndex);\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n    }\n    try {\n      setStatus('Switching camera...');\n      const constraints = isAudioOnly ? {\n        audio: QUALITY_PRESETS.audioOnly.audio\n      } : {\n        video: {\n          deviceId: {\n            exact: cameras[newIndex].deviceId\n          },\n          ...QUALITY_PRESETS[currentQuality].video\n        },\n        audio: QUALITY_PRESETS[currentQuality].audio\n      };\n      const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      setStream(newStream);\n      videoRef.current.srcObject = newStream;\n      setStatus('Camera switched!');\n    } catch (err) {\n      setStatus('Error switching camera');\n      console.error('Camera switch error:', err);\n    }\n  };\n\n  // Start recording\n  const startRecording = async () => {\n    if (!stream) {\n      setStatus('No media stream available');\n      return;\n    }\n    try {\n      setStatus('Starting recording...');\n\n      // Start network quality monitoring\n      networkCheckInterval.current = setInterval(assessNetworkQuality, 10000);\n\n      // Clear previous chunks\n      chunksRef.current = [];\n      setChunks([]);\n      const recorder = new window.MediaRecorder(stream, {\n        mimeType: 'video/webm;codecs=vp8,opus'\n      });\n      setMediaRecorder(recorder);\n      setRecordingTime(0);\n      recorder.ondataavailable = e => {\n        console.log('Data available:', e.data.size, 'bytes');\n        if (e.data.size > 0) {\n          chunksRef.current.push(e.data);\n          setChunks(prev => [...prev, e.data]);\n        }\n      };\n      recorder.onstop = async () => {\n        console.log('Recording stopped. Total chunks:', chunksRef.current.length);\n        console.log('Total data size:', chunksRef.current.reduce((total, chunk) => total + chunk.size, 0), 'bytes');\n        if (networkCheckInterval.current) {\n          clearInterval(networkCheckInterval.current);\n        }\n        if (recordingTimer.current) {\n          clearInterval(recordingTimer.current);\n        }\n        if (chunksRef.current.length === 0) {\n          setStatus('Error: No recording data captured');\n          console.error('No chunks available for recording');\n          return;\n        }\n        const blob = new Blob(chunksRef.current, {\n          type: 'video/webm'\n        });\n        console.log('Blob created:', blob.size, 'bytes');\n        if (blob.size === 0) {\n          setStatus('Error: Recording file is empty');\n          console.error('Blob size is 0');\n          return;\n        }\n\n        // Upload to backend only - no automatic download\n        const formData = new FormData();\n        const filename = `recording-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.webm`;\n        formData.append('file', blob, filename);\n        try {\n          setStatus('Uploading recording...');\n          const response = await fetch(API_URL, {\n            method: 'POST',\n            body: formData\n          });\n          if (response.ok) {\n            const result = await response.json();\n            console.log('Upload successful:', result);\n            setStatus('Recording saved successfully! You can view it in the Playback page.');\n          } else {\n            const errorText = await response.text();\n            console.error('Upload failed:', errorText);\n            setStatus('Error saving recording to server');\n          }\n        } catch (err) {\n          setStatus('Error uploading recording');\n          console.error('Upload error:', err);\n        }\n      };\n      recorder.start(1000); // Request data every 1 second\n      setIsRecording(true);\n      setStatus('Recording...');\n\n      // Start recording timer\n      recordingTimer.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n    } catch (error) {\n      setStatus('Error starting recording');\n      console.error('Recording error:', error);\n    }\n  };\n\n  // Stop recording\n  const stopRecording = () => {\n    if (mediaRecorder && isRecording) {\n      mediaRecorder.stop();\n      setIsRecording(false);\n      setStatus('Stopping recording...');\n    }\n  };\n\n  // Initialize camera access\n  useEffect(() => {\n    const initCamera = async () => {\n      try {\n        setStatus('Accessing camera...');\n        await getCameras();\n\n        // Start with medium quality\n        const initialStream = await navigator.mediaDevices.getUserMedia({\n          video: QUALITY_PRESETS.medium.video,\n          audio: QUALITY_PRESETS.medium.audio\n        });\n        setStream(initialStream);\n        if (videoRef.current) {\n          videoRef.current.srcObject = initialStream;\n        }\n        setStatus('Camera ready');\n      } catch (err) {\n        setStatus('Error accessing camera/microphone');\n        console.error('Camera access error:', err);\n      }\n    };\n    initCamera();\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n      if (networkCheckInterval.current) {\n        clearInterval(networkCheckInterval.current);\n      }\n      if (recordingTimer.current) {\n        clearInterval(recordingTimer.current);\n      }\n    };\n  }, []);\n\n  // Format recording time\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto mt-10 bg-white rounded-lg shadow p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4 text-blue-700\",\n      children: \"Record Video\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-3 bg-gray-100 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-700\",\n        children: [\"Status: \", status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-700\",\n        children: [\"Quality: \", currentQuality, \" \", isAudioOnly && '(Audio Only)']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-700\",\n        children: [\"Network: \", networkQuality]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), isRecording && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-red-600 font-semibold\",\n        children: [\"Recording: \", formatTime(recordingTime)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 11\n      }, this), cameras.length > 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500 mt-1\",\n        children: [\"Available cameras: \", cameras.length, \" | Current: \", ((_cameras$currentCamer = cameras[currentCameraIndex]) === null || _cameras$currentCamer === void 0 ? void 0 : _cameras$currentCamer.label) || 'Camera ' + (currentCameraIndex + 1)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 mb-6 flex-wrap\",\n      children: [!isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startRecording,\n        className: \"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg shadow-lg font-semibold\",\n        children: \"Start Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopRecording,\n        className: \"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg shadow-lg font-semibold\",\n        children: \"Stop Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }, this), cameras.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: switchCamera,\n        disabled: isRecording,\n        className: `px-4 py-3 rounded-lg shadow-lg font-semibold ${isRecording ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-yellow-600 hover:bg-yellow-700 text-white'}`,\n        children: \"Switch Camera\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setQuality('high'),\n          disabled: isRecording,\n          className: `px-3 py-2 rounded shadow text-sm ${isRecording ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : currentQuality === 'high' ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-700 hover:bg-gray-400'}`,\n          children: \"High\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setQuality('medium'),\n          disabled: isRecording,\n          className: `px-3 py-2 rounded shadow text-sm ${isRecording ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : currentQuality === 'medium' ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-700 hover:bg-gray-400'}`,\n          children: \"Medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setQuality('low'),\n          disabled: isRecording,\n          className: `px-3 py-2 rounded shadow text-sm ${isRecording ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : currentQuality === 'low' ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-700 hover:bg-gray-400'}`,\n          children: \"Low\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setQuality('audioOnly'),\n          disabled: isRecording,\n          className: `px-3 py-2 rounded shadow text-sm ${isRecording ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : currentQuality === 'audioOnly' ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-700 hover:bg-gray-400'}`,\n          children: \"Audio Only\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        muted: true,\n        className: \"rounded-lg shadow-lg border-2 border-blue-200 w-full h-96 bg-black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this), isAudioOnly && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 left-4 p-2 bg-yellow-100 rounded text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-yellow-800 text-sm font-semibold\",\n          children: \"Audio Only Mode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-yellow-700 text-xs\",\n          children: \"Poor Network Detected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 right-4 p-2 bg-red-600 rounded text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-3 h-3 bg-white rounded-full animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: \"REC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 p-3 bg-red-100 rounded\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-700 text-sm\",\n        children: [\"\\uD83D\\uDD34 Recording in progress... \", formatTime(recordingTime)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-4 bg-blue-50 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold text-blue-800 mb-2\",\n        children: \"Adaptive Quality Features:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-sm text-blue-700 space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 Automatic quality adjustment based on network conditions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 Fallback to audio-only recording in poor network\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 Manual quality control for optimal recording\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 Real-time network quality monitoring\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 Automatic camera switching support\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 352,\n    columnNumber: 5\n  }, this);\n};\n_s(Record, \"GgBwPJrKk1Wy8i60cKh6NcVcDEs=\");\n_c = Record;\nexport default Record;\nvar _c;\n$RefreshReg$(_c, \"Record\");","map":{"version":3,"names":["React","useRef","useState","useEffect","toast","jsxDEV","_jsxDEV","API_URL","QUALITY_PRESETS","high","video","width","height","frameRate","bitrate","audio","sampleRate","channelCount","medium","low","audioOnly","Record","_s","_cameras$currentCamer","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","chunks","setChunks","stream","setStream","cameras","setCameras","currentCameraIndex","setCurrentCameraIndex","currentQuality","setCurrentQuality","isAudioOnly","setIsAudioOnly","networkQuality","setNetworkQuality","recordingTime","setRecordingTime","status","setStatus","videoRef","recordingTimer","networkCheckInterval","chunksRef","getCameras","devices","navigator","mediaDevices","enumerateDevices","videoDevices","filter","device","kind","err","console","error","assessNetworkQuality","startTime","performance","now","response","fetch","method","cache","endTime","latency","newQuality","newAudioOnly","ok","adjustRecordingQuality","toFixed","quality","getTracks","forEach","track","stop","constraints","deviceId","exact","undefined","newStream","getUserMedia","current","srcObject","message","setQuality","switchCamera","length","newIndex","startRecording","setInterval","recorder","window","MediaRecorder","mimeType","ondataavailable","e","log","data","size","push","prev","onstop","reduce","total","chunk","clearInterval","blob","Blob","type","formData","FormData","filename","Date","toISOString","slice","replace","append","body","result","json","errorText","text","start","stopRecording","initCamera","initialStream","formatTime","seconds","mins","Math","floor","secs","toString","padStart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","label","onClick","disabled","ref","autoPlay","playsInline","muted","_c","$RefreshReg$"],"sources":["/Users/dhruva_kumar/Work Space/final project/client/src/pages/Record.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport toast from 'react-hot-toast';\n\nconst API_URL = 'http://192.168.98.141:5001/api/recordings';\n\n// Quality presets for adaptive recording\nconst QUALITY_PRESETS = {\n  high: {\n    video: { width: 1280, height: 720, frameRate: 30, bitrate: 2500000 },\n    audio: { sampleRate: 48000, channelCount: 2, bitrate: 128000 }\n  },\n  medium: {\n    video: { width: 854, height: 480, frameRate: 25, bitrate: 1000000 },\n    audio: { sampleRate: 44100, channelCount: 2, bitrate: 96000 }\n  },\n  low: {\n    video: { width: 640, height: 360, frameRate: 20, bitrate: 500000 },\n    audio: { sampleRate: 22050, channelCount: 1, bitrate: 64000 }\n  },\n  audioOnly: {\n    video: false,\n    audio: { sampleRate: 22050, channelCount: 1, bitrate: 32000 }\n  }\n};\n\nconst Record = () => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [chunks, setChunks] = useState([]);\n  const [stream, setStream] = useState(null);\n  const [cameras, setCameras] = useState([]);\n  const [currentCameraIndex, setCurrentCameraIndex] = useState(0);\n  const [currentQuality, setCurrentQuality] = useState('medium');\n  const [isAudioOnly, setIsAudioOnly] = useState(false);\n  const [networkQuality, setNetworkQuality] = useState('unknown');\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [status, setStatus] = useState('Ready to record');\n\n  const videoRef = useRef();\n  const recordingTimer = useRef(null);\n  const networkCheckInterval = useRef(null);\n  const chunksRef = useRef([]); // Use ref to store chunks\n\n  // Get available cameras\n  const getCameras = async () => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const videoDevices = devices.filter(device => device.kind === 'videoinput');\n      setCameras(videoDevices);\n      return videoDevices;\n    } catch (err) {\n      console.error('Error getting cameras:', err);\n      return [];\n    }\n  };\n\n  // Assess network quality for recording\n  const assessNetworkQuality = async () => {\n    try {\n      // Simple network quality assessment for recording\n      const startTime = performance.now();\n      const response = await fetch(API_URL, { \n        method: 'HEAD',\n        cache: 'no-cache'\n      });\n      const endTime = performance.now();\n      const latency = endTime - startTime;\n\n      let newQuality = currentQuality;\n      let newAudioOnly = isAudioOnly;\n\n      if (latency > 1000 || !response.ok) {\n        // Poor network - switch to audio only\n        newQuality = 'audioOnly';\n        newAudioOnly = true;\n        setNetworkQuality('poor');\n      } else if (latency > 500) {\n        // Medium network - use low quality\n        newQuality = 'low';\n        newAudioOnly = false;\n        setNetworkQuality('medium');\n      } else if (latency > 200) {\n        // Good network - use medium quality\n        newQuality = 'medium';\n        newAudioOnly = false;\n        setNetworkQuality('good');\n      } else {\n        // Excellent network - use high quality\n        newQuality = 'high';\n        newAudioOnly = false;\n        setNetworkQuality('excellent');\n      }\n\n      // Apply quality changes if needed\n      if (newQuality !== currentQuality || newAudioOnly !== isAudioOnly) {\n        await adjustRecordingQuality(newQuality, newAudioOnly);\n      }\n\n      setStatus(`Network: ${networkQuality} (${latency.toFixed(0)}ms latency)`);\n    } catch (error) {\n      console.error('Error assessing network quality:', error);\n      // If network check fails, assume poor network and switch to audio only\n      if (currentQuality !== 'audioOnly') {\n        await adjustRecordingQuality('audioOnly', true);\n      }\n    }\n  };\n\n  // Adjust recording quality based on network conditions\n  const adjustRecordingQuality = async (quality, audioOnly = false) => {\n    if (isRecording) {\n      setStatus('Cannot adjust quality while recording');\n      return;\n    }\n\n    try {\n      setStatus(`Adjusting quality to: ${quality}${audioOnly ? ' (audio only)' : ''}`);\n      \n      // Stop current stream if exists\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n      \n      // Get new stream with adjusted quality\n      const constraints = audioOnly ? \n        { audio: QUALITY_PRESETS.audioOnly.audio } :\n        { \n          video: { \n            deviceId: cameras[currentCameraIndex] ? { exact: cameras[currentCameraIndex].deviceId } : undefined,\n            ...QUALITY_PRESETS[quality].video \n          },\n          audio: QUALITY_PRESETS[quality].audio\n        };\n\n      const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      setStream(newStream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = newStream;\n      }\n\n      setCurrentQuality(quality);\n      setIsAudioOnly(audioOnly);\n      setStatus(`Quality adjusted to ${quality}`);\n    } catch (error) {\n      console.error('Error adjusting recording quality:', error);\n      setStatus(`Error adjusting quality: ${error.message}`);\n    }\n  };\n\n  // Manual quality adjustment\n  const setQuality = async (quality) => {\n    await adjustRecordingQuality(quality, quality === 'audioOnly');\n  };\n\n  // Switch camera\n  const switchCamera = async () => {\n    if (cameras.length < 2) {\n      setStatus('Only one camera available');\n      return;\n    }\n\n    if (isRecording) {\n      setStatus('Cannot switch camera while recording');\n      return;\n    }\n\n    const newIndex = (currentCameraIndex + 1) % cameras.length;\n    setCurrentCameraIndex(newIndex);\n    \n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n    }\n\n    try {\n      setStatus('Switching camera...');\n      const constraints = isAudioOnly ? \n        { audio: QUALITY_PRESETS.audioOnly.audio } :\n        { \n          video: { \n            deviceId: { exact: cameras[newIndex].deviceId }, \n            ...QUALITY_PRESETS[currentQuality].video \n          },\n          audio: QUALITY_PRESETS[currentQuality].audio\n        };\n\n      const newStream = await navigator.mediaDevices.getUserMedia(constraints);\n      setStream(newStream);\n      videoRef.current.srcObject = newStream;\n      setStatus('Camera switched!');\n    } catch (err) {\n      setStatus('Error switching camera');\n      console.error('Camera switch error:', err);\n    }\n  };\n\n  // Start recording\n  const startRecording = async () => {\n    if (!stream) {\n      setStatus('No media stream available');\n      return;\n    }\n\n    try {\n      setStatus('Starting recording...');\n      \n      // Start network quality monitoring\n      networkCheckInterval.current = setInterval(assessNetworkQuality, 10000);\n      \n      // Clear previous chunks\n      chunksRef.current = [];\n      setChunks([]);\n      \n      const recorder = new window.MediaRecorder(stream, {\n        mimeType: 'video/webm;codecs=vp8,opus'\n      });\n      \n      setMediaRecorder(recorder);\n      setRecordingTime(0);\n      \n      recorder.ondataavailable = (e) => {\n        console.log('Data available:', e.data.size, 'bytes');\n        if (e.data.size > 0) {\n          chunksRef.current.push(e.data);\n          setChunks(prev => [...prev, e.data]);\n        }\n      };\n      \n      recorder.onstop = async () => {\n        console.log('Recording stopped. Total chunks:', chunksRef.current.length);\n        console.log('Total data size:', chunksRef.current.reduce((total, chunk) => total + chunk.size, 0), 'bytes');\n        \n        if (networkCheckInterval.current) {\n          clearInterval(networkCheckInterval.current);\n        }\n        if (recordingTimer.current) {\n          clearInterval(recordingTimer.current);\n        }\n        \n        if (chunksRef.current.length === 0) {\n          setStatus('Error: No recording data captured');\n          console.error('No chunks available for recording');\n          return;\n        }\n        \n        const blob = new Blob(chunksRef.current, { type: 'video/webm' });\n        console.log('Blob created:', blob.size, 'bytes');\n        \n        if (blob.size === 0) {\n          setStatus('Error: Recording file is empty');\n          console.error('Blob size is 0');\n          return;\n        }\n        \n        // Upload to backend only - no automatic download\n        const formData = new FormData();\n        const filename = `recording-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.webm`;\n        formData.append('file', blob, filename);\n        \n        try {\n          setStatus('Uploading recording...');\n          const response = await fetch(API_URL, { \n            method: 'POST', \n            body: formData \n          });\n          \n          if (response.ok) {\n            const result = await response.json();\n            console.log('Upload successful:', result);\n            setStatus('Recording saved successfully! You can view it in the Playback page.');\n          } else {\n            const errorText = await response.text();\n            console.error('Upload failed:', errorText);\n            setStatus('Error saving recording to server');\n          }\n        } catch (err) {\n          setStatus('Error uploading recording');\n          console.error('Upload error:', err);\n        }\n      };\n      \n      recorder.start(1000); // Request data every 1 second\n      setIsRecording(true);\n      setStatus('Recording...');\n      \n      // Start recording timer\n      recordingTimer.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n      \n    } catch (error) {\n      setStatus('Error starting recording');\n      console.error('Recording error:', error);\n    }\n  };\n\n  // Stop recording\n  const stopRecording = () => {\n    if (mediaRecorder && isRecording) {\n      mediaRecorder.stop();\n      setIsRecording(false);\n      setStatus('Stopping recording...');\n    }\n  };\n\n  // Initialize camera access\n  useEffect(() => {\n    const initCamera = async () => {\n      try {\n        setStatus('Accessing camera...');\n        await getCameras();\n        \n        // Start with medium quality\n        const initialStream = await navigator.mediaDevices.getUserMedia({\n          video: QUALITY_PRESETS.medium.video,\n          audio: QUALITY_PRESETS.medium.audio\n        });\n        \n        setStream(initialStream);\n        if (videoRef.current) {\n          videoRef.current.srcObject = initialStream;\n        }\n        setStatus('Camera ready');\n      } catch (err) {\n        setStatus('Error accessing camera/microphone');\n        console.error('Camera access error:', err);\n      }\n    };\n\n    initCamera();\n\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n      if (networkCheckInterval.current) {\n        clearInterval(networkCheckInterval.current);\n      }\n      if (recordingTimer.current) {\n        clearInterval(recordingTimer.current);\n      }\n    };\n  }, []);\n\n  // Format recording time\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto mt-10 bg-white rounded-lg shadow p-6\">\n      <h2 className=\"text-2xl font-bold mb-4 text-blue-700\">Record Video</h2>\n      \n      <div className=\"mb-4 p-3 bg-gray-100 rounded\">\n        <p className=\"text-sm text-gray-700\">Status: {status}</p>\n        <p className=\"text-sm text-gray-700\">Quality: {currentQuality} {isAudioOnly && '(Audio Only)'}</p>\n        <p className=\"text-sm text-gray-700\">Network: {networkQuality}</p>\n        {isRecording && (\n          <p className=\"text-sm text-red-600 font-semibold\">Recording: {formatTime(recordingTime)}</p>\n        )}\n        {cameras.length > 1 && (\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Available cameras: {cameras.length} | Current: {cameras[currentCameraIndex]?.label || 'Camera ' + (currentCameraIndex + 1)}\n          </p>\n        )}\n      </div>\n\n      <div className=\"flex gap-4 mb-6 flex-wrap\">\n        {!isRecording ? (\n          <button\n            onClick={startRecording}\n            className=\"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg shadow-lg font-semibold\"\n          >\n            Start Recording\n          </button>\n        ) : (\n          <button\n            onClick={stopRecording}\n            className=\"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg shadow-lg font-semibold\"\n          >\n            Stop Recording\n          </button>\n        )}\n        \n        {cameras.length > 1 && (\n          <button\n            onClick={switchCamera}\n            disabled={isRecording}\n            className={`px-4 py-3 rounded-lg shadow-lg font-semibold ${\n              isRecording \n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : 'bg-yellow-600 hover:bg-yellow-700 text-white'\n            }`}\n          >\n            Switch Camera\n          </button>\n        )}\n        \n        {/* Manual Quality Controls */}\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setQuality('high')}\n            disabled={isRecording}\n            className={`px-3 py-2 rounded shadow text-sm ${\n              isRecording \n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : currentQuality === 'high' \n                  ? 'bg-green-600 text-white' \n                  : 'bg-gray-300 text-gray-700 hover:bg-gray-400'\n            }`}\n          >\n            High\n          </button>\n          <button\n            onClick={() => setQuality('medium')}\n            disabled={isRecording}\n            className={`px-3 py-2 rounded shadow text-sm ${\n              isRecording \n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : currentQuality === 'medium' \n                  ? 'bg-green-600 text-white' \n                  : 'bg-gray-300 text-gray-700 hover:bg-gray-400'\n            }`}\n          >\n            Medium\n          </button>\n          <button\n            onClick={() => setQuality('low')}\n            disabled={isRecording}\n            className={`px-3 py-2 rounded shadow text-sm ${\n              isRecording \n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : currentQuality === 'low' \n                  ? 'bg-green-600 text-white' \n                  : 'bg-gray-300 text-gray-700 hover:bg-gray-400'\n            }`}\n          >\n            Low\n          </button>\n          <button\n            onClick={() => setQuality('audioOnly')}\n            disabled={isRecording}\n            className={`px-3 py-2 rounded shadow text-sm ${\n              isRecording \n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : currentQuality === 'audioOnly' \n                  ? 'bg-green-600 text-white' \n                  : 'bg-gray-300 text-gray-700 hover:bg-gray-400'\n            }`}\n          >\n            Audio Only\n          </button>\n        </div>\n      </div>\n\n      <div className=\"relative\">\n        <video\n          ref={videoRef}\n          autoPlay\n          playsInline\n          muted\n          className=\"rounded-lg shadow-lg border-2 border-blue-200 w-full h-96 bg-black\"\n        />\n        \n        {isAudioOnly && (\n          <div className=\"absolute top-4 left-4 p-2 bg-yellow-100 rounded text-center\">\n            <p className=\"text-yellow-800 text-sm font-semibold\">Audio Only Mode</p>\n            <p className=\"text-yellow-700 text-xs\">Poor Network Detected</p>\n          </div>\n        )}\n        \n        {isRecording && (\n          <div className=\"absolute top-4 right-4 p-2 bg-red-600 rounded text-white\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 bg-white rounded-full animate-pulse\"></div>\n              <span className=\"font-semibold\">REC</span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {isRecording && (\n        <div className=\"mt-4 p-3 bg-red-100 rounded\">\n          <p className=\"text-red-700 text-sm\">ðŸ”´ Recording in progress... {formatTime(recordingTime)}</p>\n        </div>\n      )}\n\n      <div className=\"mt-6 p-4 bg-blue-50 rounded\">\n        <h3 className=\"font-semibold text-blue-800 mb-2\">Adaptive Quality Features:</h3>\n        <ul className=\"text-sm text-blue-700 space-y-1\">\n          <li>â€¢ Automatic quality adjustment based on network conditions</li>\n          <li>â€¢ Fallback to audio-only recording in poor network</li>\n          <li>â€¢ Manual quality control for optimal recording</li>\n          <li>â€¢ Real-time network quality monitoring</li>\n          <li>â€¢ Automatic camera switching support</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default Record; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}